{"ast":null,"code":"var _jsxFileName = \"/home/talha/Documents/Projects/twitter-search/src/search/search.js\";\nimport React, { Component } from \"react\";\nimport axios from \"axios\";\nimport './search.css';\n\nclass Search extends Component {\n  constructor(...args) {\n    super(...args);\n    this.DATE_OPTIONS = {\n      weekday: 'short',\n      year: 'numeric',\n      month: 'short',\n      day: 'numeric'\n    };\n    this.state = {\n      searchValue: '',\n      isSearchPerformed: false,\n      tweets: [],\n      recentSearches: [],\n      accessToken: '',\n      hashTags: {},\n      isLoading: false\n    };\n\n    this.getAccessToken = async () => {\n      return axios('/api/accessToken/', {\n        method: 'GET'\n      });\n    };\n\n    this.onSearchChange = event => {\n      this.setState({\n        searchValue: event.target.value\n      });\n    };\n\n    this.search = async () => {\n      const lastSearch = this.state.recentSearches.length ? this.state.recentSearches[this.state.recentSearches.length - 1] : '';\n\n      if (this.state.searchValue.trim() && lastSearch !== this.state.searchValue) {\n        this.state.recentSearches.push(this.state.searchValue);\n        this.setState({\n          isLoading: true\n        });\n        await this.fetchTweets(this.state.searchValue);\n      }\n    };\n\n    this.clearSearch = () => {\n      this.setState({\n        searchValue: ''\n      });\n    };\n\n    this.fetchTweets = async searchInput => {\n      const options = {\n        url: \"api/tweets?accessToken=\".concat(this.state.accessToken, \"&q=\").concat(escape(searchInput)),\n        method: 'GET'\n      };\n\n      try {\n        const response = await axios(options);\n        const hashTags = this.getRankedHashTags(response.data.items);\n        this.setState({\n          tweets: response.data.items || [],\n          hashTags: hashTags,\n          isSearchPerformed: true,\n          isLoading: false\n        });\n      } catch (error) {\n        this.setState({\n          tweets: [],\n          isSearchPerformed: true,\n          searchValue: ''\n        });\n      }\n    };\n\n    this.getRankedHashTags = items => {\n      let hashtagsList = {};\n      items.map(item => {\n        if (item.entities.hashtags.length) {\n          item.entities.hashtags.forEach(tag => {\n            hashtagsList[tag.text] = hashtagsList[tag.text] ? hashtagsList[tag.text] + 1 : 1;\n          });\n        }\n      });\n      return hashtagsList;\n    };\n  }\n\n  async componentDidMount() {\n    const response = await this.getAccessToken();\n    this.setState({\n      accessToken: response.data.items\n    });\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77\n      },\n      __self: this\n    }, this.state.accessToken ? React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80\n      },\n      __self: this\n    }, React.createElement(\"h1\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81\n      },\n      __self: this\n    }, \"Tweets Search App\"), React.createElement(\"input\", {\n      name: \"text\",\n      type: \"text\",\n      placeholder: \"Enter something to search\",\n      onChange: event => this.onSearchChange(event),\n      value: this.state.searchValue,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82\n      },\n      __self: this\n    }), React.createElement(\"button\", {\n      onClick: this.search,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89\n      },\n      __self: this\n    }, \"Search\"), React.createElement(\"button\", {\n      onClick: this.clearSearch,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90\n      },\n      __self: this\n    }, \"Clear Search\")) : 'Loading App...', !this.state.isLoading ? React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95\n      },\n      __self: this\n    }, this.state.tweets.length || this.state.isSearchPerformed ? React.createElement(\"div\", {\n      className: \"search-list\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97\n      },\n      __self: this\n    }, React.createElement(\"h2\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98\n      },\n      __self: this\n    }, \"Search Results\"), React.createElement(\"ul\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99\n      },\n      __self: this\n    }, this.state.tweets.map((tweet, index) => React.createElement(\"li\", {\n      key: index,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101\n      },\n      __self: this\n    }, React.createElement(\"h4\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102\n      },\n      __self: this\n    }, new Date().toLocaleDateString('en-US', this.DATE_OPTIONS)), React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103\n      },\n      __self: this\n    }, tweet.text, \">\"))), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106\n      },\n      __self: this\n    }, this.state.tweets.length === 0 && this.state.isSearchPerformed === true ? 'No data found' : ''))) : null) : 'Searching...', this.state.recentSearches.length ? React.createElement(\"div\", {\n      className: \"recent-search-list\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114\n      },\n      __self: this\n    }, React.createElement(\"h2\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115\n      },\n      __self: this\n    }, \"Recent Searches\"), React.createElement(\"ul\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116\n      },\n      __self: this\n    }, this.state.recentSearches.map((search, index) => React.createElement(\"li\", {\n      key: index,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118\n      },\n      __self: this\n    }, search)))) : null, Object.keys(this.state.hashTags).length ? React.createElement(\"div\", {\n      className: \"hashtag-list\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126\n      },\n      __self: this\n    }, React.createElement(\"h2\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127\n      },\n      __self: this\n    }, \"Ranked HashTags\"), React.createElement(\"ul\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128\n      },\n      __self: this\n    }, Object.keys(this.state.hashTags).map((tag, index) => React.createElement(\"li\", {\n      key: index,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130\n      },\n      __self: this\n    }, tag + ': ' + this.state.hashTags[tag])))) : React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133\n      },\n      __self: this\n    }, Object.keys(this.state.hashTags).length === 0 && this.state.isSearchPerformed === true ? 'No data found' : ''));\n  }\n\n}\n\nexport default Search;","map":{"version":3,"sources":["/home/talha/Documents/Projects/twitter-search/src/search/search.js"],"names":["React","Component","axios","Search","DATE_OPTIONS","weekday","year","month","day","state","searchValue","isSearchPerformed","tweets","recentSearches","accessToken","hashTags","isLoading","getAccessToken","method","onSearchChange","event","setState","target","value","search","lastSearch","length","trim","push","fetchTweets","clearSearch","searchInput","options","url","escape","response","getRankedHashTags","data","items","error","hashtagsList","map","item","entities","hashtags","forEach","tag","text","componentDidMount","render","tweet","index","Date","toLocaleDateString","Object","keys"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport axios from \"axios\";\nimport './search.css';\n\nclass Search extends Component {\n  DATE_OPTIONS = { weekday: 'short', year: 'numeric', month: 'short', day: 'numeric' };\n  state = {\n    searchValue: '',\n    isSearchPerformed: false,\n    tweets: [],\n    recentSearches: [],\n    accessToken: '',\n    hashTags: {},\n    isLoading: false\n  };\n\n  async componentDidMount() {\n    const response = await this.getAccessToken();\n    this.setState({ accessToken: response.data.items })\n  }\n\n  getAccessToken = async () => {\n    return axios('/api/accessToken/', { method: 'GET' })\n  }\n\n  onSearchChange = event => {\n    this.setState({ searchValue: event.target.value });\n  };\n\n  search = async () => {\n    const lastSearch = this.state.recentSearches.length ? this.state.recentSearches[this.state.recentSearches.length - 1] : '';\n    if (this.state.searchValue.trim() && lastSearch !== this.state.searchValue) {\n      this.state.recentSearches.push(this.state.searchValue);\n      this.setState({ isLoading: true });\n      await this.fetchTweets(this.state.searchValue);\n    }\n  };\n\n  clearSearch = () => {\n    this.setState({ searchValue: '' });\n  };\n\n  fetchTweets = async searchInput => {\n    const options = {\n      url: `api/tweets?accessToken=${this.state.accessToken}&q=${escape(searchInput)}`,\n      method: 'GET',\n    };\n\n    try {\n      const response = await axios(options);\n      const hashTags = this.getRankedHashTags(response.data.items);\n      this.setState({\n        tweets: response.data.items || [],\n        hashTags: hashTags,\n        isSearchPerformed: true,\n        isLoading: false\n      });\n    } catch (error) {\n      this.setState({ tweets: [], isSearchPerformed: true, searchValue: '' });\n    }\n  };\n\n  getRankedHashTags = items => {\n    let hashtagsList = {};\n    items.map((item) => {\n      if (item.entities.hashtags.length) {\n        item.entities.hashtags.forEach(tag => {\n          hashtagsList[tag.text] = hashtagsList[tag.text] ? hashtagsList[tag.text] + 1 : 1;\n        });\n      }\n    });\n    return hashtagsList;\n  };\n\n  render() {\n    return (\n      <div>\n        {\n          this.state.accessToken ?\n            <div>\n              <h1>Tweets Search App</h1>\n              <input\n                name=\"text\"\n                type=\"text\"\n                placeholder=\"Enter something to search\"\n                onChange={event => this.onSearchChange(event)}\n                value={this.state.searchValue}\n              />\n              <button onClick={this.search}>Search</button>\n              <button onClick={this.clearSearch}>Clear Search</button>\n            </div> : 'Loading App...'\n        }\n        {\n          !this.state.isLoading ?\n            <div>{\n              this.state.tweets.length || this.state.isSearchPerformed ?\n                <div className=\"search-list\">\n                  <h2>Search Results</h2>\n                  <ul>\n                    {this.state.tweets.map((tweet, index) => (\n                      <li key={index}>\n                        <h4>{(new Date()).toLocaleDateString('en-US', this.DATE_OPTIONS)}</h4>\n                        <span>{tweet.text}></span>\n                      </li>\n                    ))}\n                    <p>{this.state.tweets.length === 0 && this.state.isSearchPerformed === true ? 'No data found' : ''}</p>\n                  </ul>\n                </div> : null\n            }\n            </div> : 'Searching...'\n        }\n        {\n          this.state.recentSearches.length ?\n            <div className=\"recent-search-list\">\n              <h2>Recent Searches</h2>\n              <ul>\n                {this.state.recentSearches.map((search, index) => (\n                  <li key={index}>{search}</li>\n                ))}\n              </ul>\n            </div> : null\n        }\n        {\n\n          Object.keys(this.state.hashTags).length ?\n            <div className=\"hashtag-list\">\n              <h2>Ranked HashTags</h2>\n              <ul>\n                {Object.keys(this.state.hashTags).map((tag, index) => (\n                  <li key={index}>{tag + ': ' + this.state.hashTags[tag]}</li>\n                ))}\n              </ul>\n            </div> : <p>{Object.keys(this.state.hashTags).length === 0 && this.state.isSearchPerformed === true ? 'No data found' : ''}</p>\n        }\n      </div >\n    );\n  }\n}\n\nexport default Search;"]},"metadata":{},"sourceType":"module"}